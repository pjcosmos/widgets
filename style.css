/* ===== Study Planner - Monotone Gray (FINAL) ===== */

/* Theme */
:root{
  --bg: transparent;
  --panel:#ffffff;
  --text:#1f2937;   /* Gray 800 */
  --muted:#6b7280;  /* Gray 500 */
  --line:#e5e7eb;   /* Gray 200 */
  --acc:#374151;    /* Gray 700 */
  --dot:#4b5563;    /* Gray 600 */
  --radius:18px;
  --shadow:0 12px 28px rgba(0,0,0,.08);
}

*{box-sizing:border-box}
html,body{width:100%;height:auto;margin:0;padding:0;background:var(--bg);color:var(--text);}

/* Notion 임베드/브라우저 공통 래퍼 */
.app{
  width:100%;
  max-width:720px;
  margin:0 auto;
  padding:16px 12px 40px;
  font:14px/1.5 "Pretendard", ui-sans-serif, -apple-system, "Segoe UI", "Noto Sans KR", Roboto, Arial, sans-serif;
  display:flex; flex-direction:column; gap:20px;
}

/* 공통 카드 */
.card{
  width:100%;
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:18px;
}
.card-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.card-head strong{font-weight:700}

/* ===== Calendar ===== */
.calendar{ position: relative; }  /* tooltip 기준점 */
.nav button{
  border:0; background:#f9fafb; color:var(--text);
  width:34px;height:34px;border-radius:10px; cursor:pointer;
  border:1px solid var(--line);
}
.nav button:hover{background:#f3f4f6}

.weekday,.grid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px}
.weekday div{font-size:12px;color:var(--muted);text-align:center}

.cell{
  height:46px;border-radius:12px;border:1px solid var(--line);
  background:#fff;display:flex;align-items:center;justify-content:center;
  position:relative; user-select:none;
}
.cell.today{
  border-color:var(--acc);
  box-shadow:0 0 0 2px color-mix(in oklab, var(--acc) 30%, transparent);
  font-weight:700;
}
.cell.muted{opacity:.55}
.cell.hasTasks::after{
  content:""; position:absolute; bottom:6px; width:6px; height:6px; border-radius:50%; background:var(--dot);
}
.cell.selected{
  outline: 2px solid color-mix(in oklab, var(--acc) 40%, transparent);
  outline-offset: 2px;
  font-weight: 700;
}

/* Tooltip (텍스트만) — 아래 중앙 붙음, 부드럽게 이동 */
.tooltip{
  position:absolute; background:#fff; color:var(--text);
  border:1px solid var(--line); border-radius:12px; box-shadow:var(--shadow);
  padding:10px 12px; max-width:260px; z-index:999; pointer-events:none;
  will-change:left, top;
  transition:left .08s ease, top .08s ease, opacity .08s ease;
  opacity:1;
}
.tooltip[hidden]{ opacity:0; }
.tooltip li{ padding:4px 0; border-bottom:1px dashed var(--line); overflow-wrap:anywhere; }

/* ===== Todo ===== */
.input-box{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr auto; /* 과목 | 과제명 | 메모 | 달력아이콘 */
  gap:10px;
  margin-bottom:14px;
}
.input-box input{
  padding:11px 12px;
  border-radius:12px;
  border:1px solid var(--line);
  background:#fff; outline:none;
}
.input-box input:focus{
  box-shadow:0 0 0 3px color-mix(in oklab, var(--acc) 18%, transparent);
  border-color:var(--acc);
}

.icon-btn{
  display:inline-flex; align-items:center; justify-content:center;
  width:44px; height:44px;
  border:1px solid var(--line); background:#fff; border-radius:12px; cursor:pointer;
  color:#334155;
}
.icon-btn:hover{background:#f3f4f6}

/* “추가” 버튼은 숨김(아이콘으로 대체) */
.add{ display:none; }

/* 목록 */
#todoList{list-style:none;margin:0;padding:0}
#todoList li{
  background:#fff; border:1px solid var(--line); border-radius:12px; padding:10px 12px;
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:10px; margin-bottom:10px;
}
#todoList .text{white-space:nowrap; overflow:hidden; text-overflow:ellipsis}

/* 체크박스 */
.chk{
  width:18px;height:18px;appearance:none; border:1.8px solid var(--line); border-radius:6px; display:grid; place-content:center; cursor:pointer;
}
.chk:checked{ border-color:var(--acc); background:var(--acc); }
.chk:checked::after{ content:""; width:10px;height:10px; clip-path:polygon(14% 44%,0 62%,41% 100%,100% 22%,82% 6%,39% 72%); background:#fff; }

/* 삭제 버튼 */
.del{ border:0; background:transparent; cursor:pointer; color:#b91c1c; font-weight:700; }

/* 비어있음 힌트 */
.hint{text-align:center;color:var(--muted);margin-top:6px;font-size:13px}

.sync-row{
  display:flex; gap:10px; justify-content:flex-end; margin:-4px 0 8px;
}
.ghost{
  border:1px solid var(--line);
  background:#fff;
  color:var(--text);
  border-radius:10px;
  padding:8px 12px;
  cursor:pointer;
}
.ghost:hover{ background:#f9fafb; }
.sync-row label{ display:inline-flex; align-items:center; gap:8px; cursor:pointer; }

/* 반응형 */
@media (max-width:560px){
  .input-box{grid-template-columns:1fr 1fr auto}
  #memo{grid-column:1 / -1}
}
